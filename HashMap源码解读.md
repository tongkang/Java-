#### HashMap源码解读

1、在Java7的时候，HashMap是基于数组和链表实现的

- 核心是基于哈希值的桶和链表
- O(1)的平均查找、插入、删除时间
- 致命缺陷是哈希值的碰撞（collision）

HashMap有初始容量和最大容量，只有在往哈希表里面丢入值，才会创造桶，因为是基于初始容量（默认是：1<<4 == 16）来生成的，否则会浪费。而且一定要是2的幂，不是的也会被改写成2的幂，超过初始容量，会向上取一个幂。

默认负载因子：0.75

2、对于产生的hashcode值如何放入1~n-1个桶中呢？

h & (lenght-1)，按位与运算

在之前的初始值中，为什么要用2^n？

如果不是2^n，在上述lenght-1中，会产生0，这样会使有的位置就为空了。使用2^n，会很快拿到数组下标，并且位置还是均匀的。

最好是开辟合理的初始化大小，因为resize的效率非常低。

---

Java8的HashMap

基于数组和链表/红黑树实现的

一般在阈值超过8的时候，才会使用红黑树实现，因为满足泊松分布原则，所以才是8



