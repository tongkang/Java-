### Java字符串原理

#### 1、字符串的不可变性

##### （1）字符串的不可变性是如何保证的？

在源码中可看，首先它是`final`的，其次它里面的接口都是经过精心设计的，保证数据不会被改变。并且所有的公开API中没有可以修改值的类。

##### （2）字符串为什么是不可变的

- 优点：线程安全，储存安全。
- 缺点，每当修改的时候都需要重复创建新对象

#### 2、StringBuffer，StringBuilder和String API

**StringBuilder**

- 优先使用，线程不安全，速度快

**StringBuffer**

- 线程安全，速度较慢

##### hash值是如何存储的？

一开始会缓存一个hash值（初始值为0，第一次使用会被创建），因为hash是不可变的，所以每次就不用再次去计算。

虽然执行时的时候不是线程安全的，但是结果是一样的，所以还是**线程安全**的。

